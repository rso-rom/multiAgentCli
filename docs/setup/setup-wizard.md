# Setup Wizard - Interaktive Konfiguration

## ðŸŽ¯ Schnellstart

```bash
cacli setup
```

Der interaktive Setup-Wizard fÃ¼hrt dich durch die komplette Konfiguration!

---

## ðŸš€ Was macht der Wizard?

Der Setup-Wizard hilft dir bei:

1. âœ… **Backend-Auswahl** (Ollama, OpenAI, Claude, etc.)
2. âœ… **API-Key-Eingabe** (wenn nÃ¶tig)
3. âœ… **Memory-Konfiguration** (Qdrant optional)
4. âœ… **.env-Datei erstellen** (automatisch)
5. âœ… **Docker-Container starten** (Qdrant, optional)
6. âœ… **Verbindung testen** (Backend + Qdrant)

---

## ðŸ“‹ Ablauf

### Schritt 1: Backend wÃ¤hlen

```
? Which AI backend do you want to use?
  â¯ Ollama (Local, Free)
    OpenWebUI (Local/Remote)
    OpenAI (GPT-4, GPT-3.5)
    Claude/Anthropic
    Mock (Testing only)
```

### Schritt 2: Backend konfigurieren

**Beispiel: Ollama**
```
? Ollama URL: http://localhost:11434
? Ollama model: llama3
```

**Beispiel: OpenAI**
```
? OpenAI API Key: **********************
? OpenAI model:
  â¯ gpt-4o-mini
    gpt-4o
    gpt-4-turbo
    gpt-3.5-turbo
```

**Beispiel: Claude**
```
? How do you want to authenticate with Claude?
  â¯ OAuth (Browser login, like Claude Code CLI)
    API Key (Traditional)
```

### Schritt 3: Memory-Features

```
? Enable advanced memory features (Semantic Search with Qdrant)? (Y/n)
```

**Falls Ja:**
```
? Qdrant URL: http://localhost:6333
? Start Qdrant Docker container now? (Y/n)
? Embedding service for semantic search:
  â¯ ollama
    openai
? Embedding model: nomic-embed-text
```

### Schritt 4: Testen & Fertig

```
ðŸ§ª Testing configuration...

âœ… Ollama connected at http://localhost:11434
âœ… Qdrant connected at http://localhost:6333

âœ… Setup complete!

You can now start cacli:
  npm start
  or: cacli
```

---

## ðŸŽ¨ Backend-Optionen im Detail

### 1. Ollama (Lokal, Kostenlos)

**Voraussetzungen:**
- Ollama installiert und gestartet

**Konfiguration:**
- URL: `http://localhost:11434`
- Model: `llama3`, `mistral`, etc.

**Testen:**
```bash
ollama list  # Zeigt verfÃ¼gbare Models
```

### 2. OpenWebUI

**Voraussetzungen:**
- OpenWebUI-Server lÃ¤uft

**Konfiguration:**
- URL: `http://localhost:3000/api/v1/chat/completions`
- API Key: Optional
- Model: AbhÃ¤ngig vom Server

### 3. OpenAI

**Voraussetzungen:**
- OpenAI API Key

**Konfiguration:**
- API Key: Von platform.openai.com
- Model: `gpt-4o`, `gpt-4o-mini`, etc.

**Kosten:**
- gpt-4o-mini: ~$0.15 / 1M tokens (gÃ¼nstig!)
- gpt-4o: ~$2.50 / 1M tokens

### 4. Claude/Anthropic

**Option A: OAuth (empfohlen)**
- Browser-basierter Login
- Kein API Key nÃ¶tig
- Wie Claude Code CLI

**Nach Setup:**
```bash
cacli login claude
```

**Option B: API Key**
- Klassischer API Key
- FÃ¼r CI/CD geeignet

---

## ðŸ§  Memory-Optionen

### Basis (ohne Qdrant)

**Was funktioniert:**
- âœ… Short-term Memory (Session)
- âœ… Mid-term Memory (Persistent)
- âœ… Prompt-History

**Was nicht funktioniert:**
- âŒ Semantic Search
- âŒ Long-term Memory
- âŒ Global Knowledge Base

**Perfekt fÃ¼r:** Einstieg, Testing

### Erweitert (mit Qdrant)

**Was funktioniert:**
- âœ… Alle 4 Memory-Ebenen
- âœ… Semantic Search
- âœ… Intelligente Suche in History
- âœ… Projekt-Ã¼bergreifendes Wissen

**Voraussetzungen:**
- Docker fÃ¼r Qdrant
- Embedding-Service (Ollama/OpenAI)

**Perfekt fÃ¼r:** Produktive Nutzung

---

## ðŸ³ Qdrant Docker Setup

Der Wizard kann Qdrant automatisch starten:

```bash
? Start Qdrant Docker container now? Yes
ðŸ³ Starting Qdrant Docker container...
âœ… Qdrant container started successfully
   Dashboard: http://localhost:6333/dashboard
```

**Manuell starten:**
```bash
docker run -d --name qdrant \
  -p 6333:6333 -p 6334:6334 \
  -v $(pwd)/qdrant_storage:/qdrant/storage \
  qdrant/qdrant
```

**PrÃ¼fen:**
```bash
docker ps | grep qdrant
curl http://localhost:6333/collections
```

---

## ðŸ”§ Nach dem Setup

### Generierte .env-Datei

Der Wizard erstellt `.env` mit:

```env
# cacli Configuration
# Generated by Setup Wizard

# Logging
LOG_LEVEL=info

# Model Backend
MODEL_BACKEND=ollama
OLLAMA_URL=http://localhost:11434
OLLAMA_MODEL=llama3

# Memory System
MEMORY_PATH=./memory
USE_QDRANT=true
QDRANT_URL=http://localhost:6333

# Embedding Service
EMBEDDING_SERVICE=ollama
EMBEDDING_MODEL=nomic-embed-text
EMBEDDING_DIMENSION=768

# Ask-Store (prompt history)
ASK_STORE_ENABLED=true

# Auto-Resume (on token limits)
AUTO_RESUME_ENABLED=true
MAX_RESUME_ATTEMPTS=3

# Tool Auto-Installation
AUTO_INSTALL_TOOLS=ask
```

### Manuelle Anpassungen

Du kannst `.env` jederzeit manuell bearbeiten:

```bash
# Backend wechseln
MODEL_BACKEND=openai

# Qdrant deaktivieren
USE_QDRANT=false

# Model Ã¤ndern
OLLAMA_MODEL=mistral
```

### Setup erneut ausfÃ¼hren

```bash
cacli setup

? .env file already exists. Overwrite? (y/N)
```

---

## ðŸ§ª Testen nach Setup

### Test 1: Backend

```bash
cacli
> Hello, how are you?
```

Sollte eine Antwort vom konfigurierten Backend bekommen.

### Test 2: Memory (falls Qdrant aktiviert)

```bash
cacli
> Merke dir: Mein Projekt heiÃŸt WebShop
> exit

# Neustart
cacli
> Was ist der Name meines Projekts?
# â†’ Sollte "WebShop" erinnern!
```

### Test 3: History Search (falls Qdrant aktiviert)

```bash
cacli
> Was ist OAuth2?
> Wie erstelle ich eine REST API?
> /history authentication
# â†’ Findet "OAuth2"-Frage
```

---

## âŒ Troubleshooting

### "Ollama not reachable"

**Problem:** Ollama lÃ¤uft nicht

**LÃ¶sung:**
```bash
ollama serve
# oder
ollama run llama3
```

### "Qdrant not reachable"

**Problem:** Qdrant-Container lÃ¤uft nicht

**LÃ¶sung:**
```bash
docker run -p 6333:6333 qdrant/qdrant
```

### ".env file already exists"

**Optionen:**
1. Ãœberschreiben: `Yes` beim Wizard
2. Manuell editieren: `.env` Ã¶ffnen
3. Backup erstellen: `cp .env .env.backup`

### "Docker not found"

**Problem:** Docker nicht installiert

**LÃ¶sung:**
- Qdrant-Setup Ã¼berspringen
- `USE_QDRANT=false` nutzen
- Oder Docker installieren: https://docker.com

---

## ðŸŽ¯ Setup-Szenarien

### Szenario 1: Lokale Entwicklung (kostenlos)

```bash
cacli setup
? Backend: Ollama
? Enable Qdrant: No

# Fertig! Keine Kosten, alles lokal
```

### Szenario 2: Produktiv mit OpenAI

```bash
cacli setup
? Backend: OpenAI
? API Key: sk-...
? Enable Qdrant: Yes
? Start Qdrant: Yes

# Beste QualitÃ¤t + Memory
```

### Szenario 3: Claude mit OAuth

```bash
cacli setup
? Backend: Claude/Anthropic
? Auth: OAuth (Browser login)
? Enable Qdrant: Yes

# Danach:
cacli login claude
```

### Szenario 4: Testing/Demo

```bash
cacli setup
? Backend: Mock
? Enable Qdrant: No

# Mock-Backend fÃ¼r Tests
```

---

## ðŸš€ NÃ¤chste Schritte

Nach dem Setup:

1. **Starten:**
   ```bash
   cacli
   ```

2. **OAuth-Login (falls nÃ¶tig):**
   ```bash
   cacli login claude
   ```

3. **Testen:**
   ```bash
   cacli ask "Hello world"
   ```

4. **Workflows nutzen:**
   ```bash
   cacli
   > /workflow beispiel.yml
   ```

5. **Dokumentation lesen:**
   - [QUICK-START.md](../../QUICK-START.md)
   - [Memory System](../features/memory-system.md)
   - [OAuth Guide](../features/anthropic-oauth.md)

---

## ðŸ“š Vergleich: Wizard vs Manuell

| Aspekt | Setup Wizard | Manuell |
|--------|--------------|---------|
| **Zeit** | 2-3 Minuten | 10-15 Minuten |
| **Fehlerquote** | Niedrig | Mittel |
| **Qdrant-Setup** | Automatisch | Manuell |
| **Validierung** | Eingebaut | Selbst testen |
| **Dokumentation** | Integriert | Nachschlagen |

**Empfehlung:** Wizard fÃ¼r Ersteinrichtung, manuell fÃ¼r Feintuning

---

## ðŸŽ‰ Zusammenfassung

âœ… **Interaktiver Setup** - Schritt fÃ¼r Schritt
âœ… **Alle Backends** - Ollama, OpenAI, Claude, etc.
âœ… **Docker-Integration** - Qdrant automatisch starten
âœ… **Validierung** - Verbindung sofort testen
âœ… **.env-Generierung** - Automatisch korrekt
âœ… **Wiederholbar** - Jederzeit neu konfigurieren

**Start:**
```bash
cacli setup
```

**Viel Erfolg! ðŸš€**
